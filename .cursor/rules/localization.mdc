---
globs: *.tsx,*.ts,i18n/**/*
---

# Internationalization (i18n) Rules

## Supported Languages
- **English (en-US)**: Primary language
- **Russian (ru-RU)**: Secondary language

## Translation File Structure
```
i18n/
├── index.ts                    # i18n configuration
└── locales/
    ├── en-US/
    │   └── translation.json    # English translations
    └── ru-RU/
        └── translation.json    # Russian translations
```

## Translation Usage

### 1. Always Use LanguageService
```typescript
import { LanguageService } from '@/services/language/LanguageService';

// Correct way to get translations
const title = LanguageService.translate("Title");
const errorMessage = LanguageService.translate("Something went wrong!");
```

### 2. Translation Key Naming
- Use descriptive, clear keys
- Use PascalCase for keys
- Be consistent with existing patterns
- Examples: `"Login"`, `"Add New Medicine"`, `"Something went wrong!"`
- Do not created duplicated keys in `translation.json` file

### 3. Adding New Translations
When adding new text that users will see:

1. **Ensure that translation doesn't exist yet in both translation files**
2. **Add to both translation files**:
   ```json
   // i18n/locales/en-US/translation.json
   {
     "New Feature": "New Feature"
   }
   
   // i18n/locales/ru-RU/translation.json
   {
     "New Feature": "Новая функция"
   }
   ```

3. **Use in components**:
   ```typescript
   const buttonText = LanguageService.translate("New Feature");
   ```

## Translation Patterns

### 1. Static Text
```typescript
// Good
<Text>{LanguageService.translate("Login")}</Text>
<Text>{LanguageService.translate("Add New Medicine")}</Text>

// Bad - hardcoded text
<Text>Login</Text>
<Text>Add New Medicine</Text>
```

### 2. Dynamic Text with Variables
```typescript
// For text with variables, use i18n interpolation
const message = LanguageService.translate("Only {count} doses left!").replace('{count}', 5);

// In translation files:
// "Only {count} doses left!": "Only {count} doses left!"
// "Only {count} doses left!": "Осталось только {count} доз!"
```

### 3. Error Messages
```typescript
// Use consistent error message keys
const errorText = LanguageService.translate("Something went wrong!");
const validationError = LanguageService.translate("Email is required");
```

## Translation File Management

### 1. Key Organization
- Group related keys together
- Use consistent naming patterns
- Keep keys descriptive and self-documenting

### 2. Translation Quality
- Ensure both languages have the same keys
- Keep translations contextually accurate
- Use proper grammar and punctuation
- Consider cultural differences

### 3. Missing Translations
- If a key is missing, the key itself will be displayed
- Always add missing keys to both language files

## Examples

### Good Translation Usage
```typescript
import { LanguageService } from '@/services/language/LanguageService';

const MedicineCard = ({ medicine }) => {
  return (
    <View>
      <Text>{LanguageService.translate("Medicine Details")}</Text>
      <Text>{LanguageService.translate("Next Dose")}</Text>
      <Button 
        title={LanguageService.translate("Edit")}
        onPress={handleEdit}
      />
    </View>
  );
};
```

### Form Validation Messages
```typescript
const validateEmail = (email: string) => {
  if (!email) {
    return LanguageService.translate("Email is required");
  }
  if (!isValidEmail(email)) {
    return LanguageService.translate("Invalid email");
  }
  return null;
};
```

### Dynamic Content
```typescript
const getDoseMessage = (count: number) => {
  return LanguageService.translate("Only {count} doses left!").replace('{count}', 5);
};
```

## Anti-Patterns to Avoid

❌ **Don't hardcode user-facing text**
❌ **Don't use LanguageService.translate() for non-user text**
❌ **Don't forget to add translations to both language files**
❌ **Don't use inconsistent key naming**
❌ **Don't mix hardcoded text with translated text**
❌ **Don't create translations, that already exist**

## Best Practices

✅ **Always use LanguageService.translate() for user-facing text**
✅ **Keep translation keys descriptive and consistent**
✅ **Test with both languages during development**
✅ **Use interpolation for dynamic content**
✅ **Group related translation keys together**
✅ **Maintain translation file consistency**
